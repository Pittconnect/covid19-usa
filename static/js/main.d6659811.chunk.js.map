{"version":3,"sources":["components/Layers.js","components/spiner/Spiner.js","components/charts/ConcentricChart.js","helpers/constants.js","hooks/useFetch.js","components/Map.js","App.js","serviceWorker.js","index.js"],"names":["countiesBoundLayer","id","type","source","minzoom","layout","filter","paint","countiesBorderLayer","statesBoundLayer","maxzoom","statesBorderLayer","Spiner","className","d3","window","Circle","data","sqrtScale","colorScale","height","width","top","bottom","left","right","r","value","cx","cy","fill","name","ConcentricChart","props","totalTest","totalTestResults","scaleSqrt","domain","range","scaleOrdinal","stateName","transform","dataKeys","map","_k","_n","key","usaStatesAbbr","label","fetchReducer","state","action","isLoading","error","payload","Error","bounds","Map","useState","latitude","longitude","zoom","bearing","pitch","viewport","setViewport","isMapLoaded","setIsMapLoaded","popupCoords","setPopupCoords","initialUrl","initialOptions","url","setUrl","options","setOptions","useReducer","dispatch","useEffect","a","fetch","response","status","json","fetchDataAPI","useFetch","trackers","isTrackersLoading","setIsLoading","death","hospitalizedCurrently","positive","chartData","setChartData","mapRef","useRef","_sourceRef","hoveredStateId","hoveredStateSource","getInfoAboutState","feature","mapZoom","properties","NAME","stateAbbr","find","tracker","ref","mapboxApiAccessToken","process","mapStyle","onViewportChange","_viewport","vp","WebMercatorViewport","ws","unproject","en","v","onLoad","onHover","event","current","getMap","getZoom","hoveredLayer","features","lngLat","hoveredFeature","f","layer","setFeatureState","hover","minZoom","Object","entries","length","closeButton","anchor","offsetTop","usGeoJsonCounties","generateId","beforeId","usGeoJsonStates","showCompass","App","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","console","message"],"mappings":"8z2+pBA4CaA,EAAqB,CAChCC,GAAI,eACJC,KAAM,OACNC,OAAQ,WACRC,QAAS,EACTC,OAAQ,GACRC,OAAQ,CAAC,KAAM,QAAS,WACxBC,MAAO,CACL,aAAc,UACd,eAAgB,CACd,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,GACA,MAOOC,EAAsB,CACjCP,GAAI,gBACJC,KAAM,OACNC,OAAQ,WACRC,QAAS,EACTC,OAAQ,GACRE,MAAO,CACL,aAAc,UA6Bd,eAAgB,CACd,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,EACA,IAEF,aAAc,MAILE,EAAmB,CAC9BR,GAAI,cACJE,OAAQ,SACRO,QAAS,EACTR,KAAM,OACNG,OAAQ,GAERE,MAAO,CACL,aAAc,UAEd,eAAgB,CACd,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,GACA,MAKOI,EAAoB,CAC/BV,GAAI,gBACJC,KAAM,OACNC,OAAQ,SACRE,OAAQ,GACRE,MAAO,CACL,aAAc,UACd,eAAgB,CACd,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,EACA,IAEF,aAAc,CACZ,cAAe,CAAC,UAAW,CAAC,QAC1B,EAAG,EACH,EAAG,KCvHIK,G,MAtBA,WACb,OACE,yBAAKC,UAAU,qBACb,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,+BCZ7BC,EAAKC,OAAOD,GAEZE,EAAS,SAAC,GAUT,IATLC,EASI,EATJA,KACAC,EAQI,EARJA,UACAC,EAOI,EAPJA,WAEAC,GAKI,EANJC,MAMI,EALJD,QAKI,EAJJE,IAII,EAHJC,OAGI,EAFJC,KAEI,EADJC,MAEA,OACE,4BACEC,EAAGR,EAAUD,EAAKU,OAClBC,GAAIV,EAAUD,EAAKU,OACnBE,GAAIT,EAAS,EACbU,KAAMX,EAAWF,EAAKc,SAuDbC,EAlDS,SAACC,GACvB,IAAMC,EAAYD,EAAMhB,KAAKkB,iBACvBjB,EAAYJ,EACfsB,YACAC,OAAO,CAAC,EAAGH,IACXI,MAAM,CAAC,GAAIL,EAAMb,OAASa,EAAMX,IAAMW,EAAMV,QAAU,IACnDJ,EAAaL,EAChByB,eACAF,OAAOJ,EAAMhB,MACbqB,MAAM,CACL,oBACA,oBACA,mBACA,eAKJ,OACE,oCACE,wBAAIzB,UAAU,gBAAd,iBAAwCoB,EAAMhB,KAAKuB,YACnD,yBAAKnB,MAAOY,EAAMZ,MAAOD,OAAQa,EAAMb,QACrC,uBACEqB,UAAS,oBACPR,EAAMZ,MAAQ,EAAIH,EAAUgB,GADrB,SAIRD,EAAMS,SAASC,KAAI,SAACC,EAAIC,GAAL,OAClB,kBAAC,EAAD,CACEC,IAAKD,EACL5B,KAAM,CACJc,KAAMa,EACNjB,MAAOM,EAAMhB,KAAK2B,IAEpBvB,MAAOY,EAAMZ,MACbD,OAAQa,EAAMb,OACdE,IAAKW,EAAMX,IACXG,MAAOQ,EAAMR,MACbF,OAAQU,EAAMV,OACdC,KAAMS,EAAMT,KACZN,UAAWA,EACXC,WAAYA,W,gBClEb4B,EAAgB,CAC3B,CAAEC,MAAO,UAAWrB,MAAO,MAC3B,CAAEqB,MAAO,SAAUrB,MAAO,MAC1B,CAAEqB,MAAO,iBAAkBrB,MAAO,MAClC,CAAEqB,MAAO,UAAWrB,MAAO,MAC3B,CAAEqB,MAAO,WAAYrB,MAAO,MAC5B,CAAEqB,MAAO,aAAcrB,MAAO,MAC9B,CAAEqB,MAAO,WAAYrB,MAAO,MAC5B,CAAEqB,MAAO,cAAerB,MAAO,MAC/B,CAAEqB,MAAO,WAAYrB,MAAO,MAC5B,CAAEqB,MAAO,uBAAwBrB,MAAO,MACxC,CAAEqB,MAAO,uBAAwBrB,MAAO,MACxC,CAAEqB,MAAO,UAAWrB,MAAO,MAC3B,CAAEqB,MAAO,UAAWrB,MAAO,MAC3B,CAAEqB,MAAO,OAAQrB,MAAO,MACxB,CAAEqB,MAAO,SAAUrB,MAAO,MAC1B,CAAEqB,MAAO,QAASrB,MAAO,MACzB,CAAEqB,MAAO,WAAYrB,MAAO,MAC5B,CAAEqB,MAAO,UAAWrB,MAAO,MAC3B,CAAEqB,MAAO,OAAQrB,MAAO,MACxB,CAAEqB,MAAO,SAAUrB,MAAO,MAC1B,CAAEqB,MAAO,WAAYrB,MAAO,MAC5B,CAAEqB,MAAO,YAAarB,MAAO,MAC7B,CAAEqB,MAAO,QAASrB,MAAO,MACzB,CAAEqB,MAAO,mBAAoBrB,MAAO,MACpC,CAAEqB,MAAO,WAAYrB,MAAO,MAC5B,CAAEqB,MAAO,gBAAiBrB,MAAO,MACjC,CAAEqB,MAAO,WAAYrB,MAAO,MAC5B,CAAEqB,MAAO,YAAarB,MAAO,MAC7B,CAAEqB,MAAO,cAAerB,MAAO,MAC/B,CAAEqB,MAAO,WAAYrB,MAAO,MAC5B,CAAEqB,MAAO,UAAWrB,MAAO,MAC3B,CAAEqB,MAAO,WAAYrB,MAAO,MAC5B,CAAEqB,MAAO,SAAUrB,MAAO,MAC1B,CAAEqB,MAAO,gBAAiBrB,MAAO,MACjC,CAAEqB,MAAO,aAAcrB,MAAO,MAC9B,CAAEqB,MAAO,aAAcrB,MAAO,MAC9B,CAAEqB,MAAO,WAAYrB,MAAO,MAC5B,CAAEqB,MAAO,iBAAkBrB,MAAO,MAClC,CAAEqB,MAAO,eAAgBrB,MAAO,MAChC,CAAEqB,MAAO,2BAA4BrB,MAAO,MAC5C,CAAEqB,MAAO,OAAQrB,MAAO,MACxB,CAAEqB,MAAO,WAAYrB,MAAO,MAC5B,CAAEqB,MAAO,SAAUrB,MAAO,MAC1B,CAAEqB,MAAO,QAASrB,MAAO,MACzB,CAAEqB,MAAO,eAAgBrB,MAAO,MAChC,CAAEqB,MAAO,cAAerB,MAAO,MAC/B,CAAEqB,MAAO,eAAgBrB,MAAO,MAChC,CAAEqB,MAAO,iBAAkBrB,MAAO,MAClC,CAAEqB,MAAO,eAAgBrB,MAAO,MAChC,CAAEqB,MAAO,YAAarB,MAAO,MAC7B,CAAEqB,MAAO,QAASrB,MAAO,MACzB,CAAEqB,MAAO,OAAQrB,MAAO,MACxB,CAAEqB,MAAO,UAAWrB,MAAO,MAC3B,CAAEqB,MAAO,iBAAkBrB,MAAO,MAClC,CAAEqB,MAAO,WAAYrB,MAAO,MAC5B,CAAEqB,MAAO,aAAcrB,MAAO,MAC9B,CAAEqB,MAAO,gBAAiBrB,MAAO,MACjC,CAAEqB,MAAO,YAAarB,MAAO,MAC7B,CAAEqB,MAAO,UAAWrB,MAAO,O,yBCzDvBsB,EAAe,SAACC,EAAOC,GAC3B,OAAQA,EAAOjD,MACb,IAAK,aACH,OAAO,2BACFgD,GADL,IAEEE,WAAW,EACXC,MAAO,OAEX,IAAK,gBACH,OAAO,2BACFH,GADL,IAEEE,WAAW,EACXC,MAAO,KACPpC,KAAMkC,EAAOG,UAEjB,IAAK,cACH,OAAO,2BACFJ,GADL,IAEEE,WAAW,EACXC,MAAOF,EAAOE,QAElB,QACE,MAAM,IAAIE,MAAM,yBCAtB,IAEMC,EAAS,CACb,EAAE,QAAS,UACX,EAAE,SAAU,YAuPCC,EApPH,WAAO,IAAD,EACgBC,mBAAS,CACvCC,SAAU,kBACVC,WAAY,kBACZC,KAAM,EACNC,QAAS,EACTC,MAAO,IANO,mBACTC,EADS,KACCC,EADD,OAQsBP,oBAAS,GAR/B,mBAQTQ,EARS,KAQIC,EARJ,OASsBT,mBAAS,IAT/B,mBASTU,EATS,KASIC,EATJ,ODHH,SAAkBC,GAAkC,IAAtBC,EAAqB,uDAAJ,GAAI,EAC1Cb,mBAASY,GADiC,mBACzDE,EADyD,KACpDC,EADoD,OAElCf,mBAASa,GAFyB,mBAEzDG,EAFyD,KAEhDC,EAFgD,OAItCC,qBAAW3B,EAAc,CACjDhC,KAAM,KACNmC,WAAW,EACXC,MAAO,OAPuD,mBAIzDH,EAJyD,KAIlD2B,EAJkD,KA8BhE,OApBAC,qBAAU,YACU,uCAAG,8BAAAC,EAAA,6DACnBF,EAAS,CAAE3E,KAAM,eADE,kBAIM8E,MAAMR,EAAKE,GAJjB,aAIXO,EAJW,QAKJC,OAAS,KAAOD,EAASC,QAAU,KAL/B,sBAMT,IAAI3B,MAAM,uBAND,uBAQK0B,EAASE,OARd,OAQX7B,EARW,OAUjBuB,EAAS,CAAE3E,KAAM,gBAAiBoD,YAVjB,kDAYjBuB,EAAS,CAAE3E,KAAM,cAAemD,MAAK,OAZpB,0DAAH,qDAgBlB+B,KACC,CAACZ,EAAKE,IAEF,CAACxB,EAAOuB,EAAQE,GCjB2CU,CFsBlE,wDEhCgB,sBAUDC,EAVC,EAUPrE,KAA2BsE,EAVpB,EAUSnC,UAA8BC,EAVvC,EAUuCA,MAVvC,EAakBK,oBAAS,GAb3B,mBAaTN,EAbS,KAaEoC,EAbF,OAckB9B,mBAAS,CACzC+B,MAAO,GACPC,sBAAuB,GACvBC,SAAU,KACVxD,iBAAkB,QAlBJ,mBAcTyD,EAdS,KAcEC,EAdF,KAqBVC,EAASC,mBACTC,EAAaD,mBACbE,EAAiBF,iBAAO,MACxBG,EAAqBH,iBAAO,MA2F5BI,EAAoB,SAACC,EAASC,GAClC,IAAM7D,EAAY4D,EAAQE,WAAWC,KAC/BC,EAAYzD,EAAc0D,MAC9B,SAACD,GAAD,OAAeA,EAAUxD,QAAUR,KAGrC,GAAI6D,EAAU,EAAG,CAAC,IAAD,EAMXf,EAASmB,MAAK,SAACC,GAAD,OAAaA,EAAQxD,QAAUsD,EAAU7E,SAJzDgE,EAFa,EAEbA,SACAD,EAHa,EAGbA,sBACAD,EAJa,EAIbA,MACAtD,EALa,EAKbA,iBAGGkB,GACHwC,EAAa,CACXF,WACAD,wBACAD,QACAtD,mBACAK,mBAIJqD,EAAa,KAYjB,OARAf,qBAAU,WAENU,IADGtB,IAAeqB,MAKnB,CAACrB,EAAaqB,IAGf,yBAAK1E,UAAU,iBACZuC,GACC,yBAAKvC,UAAU,eACb,kBAAC,EAAD,OAGJ,kBAAC,IAAD,iBACMmD,EADN,CAEE2C,IAAKb,EACLzE,MAAM,QACND,OAAO,QACPwF,qBA1KMC,gGA2KNC,SAAS,uDAITC,iBA5IoB,SAACC,GAAe,IAChC3F,EAAwB2F,EAAxB3F,MAAOD,EAAiB4F,EAAjB5F,OAAQyC,EAASmD,EAATnD,KACjBoD,EAAK,IAAIC,IAAoBF,GAC7BG,EAAKF,EAAGG,UAAU,CAAC,EAAGhG,IACtBiG,EAAKJ,EAAGG,UAAU,CAAC/F,EAAO,IAE5BgG,EAAG,GAAK7D,EAAO,GAAG,GAChBK,EAAOG,EAASH,KAGlBI,GAAY,SAACqD,GAAD,mBAAC,eAAYA,GAAb,IAAgB1D,UAAW0D,EAAE1D,UAAY,OAErDK,GAAY,SAACqD,GAAD,mBAAC,eACRA,GADO,IAEV1D,UAAW0D,EAAE1D,UAAY,QAIpByD,EAAG,GAAK7D,EAAO,GAAG,GACvBK,EAAOG,EAASH,KAClBI,GAAY,SAACqD,GAAD,mBAAC,eAAYA,GAAb,IAAgB3D,SAAU2D,EAAE3D,SAAW,OAEnDM,GAAY,SAACqD,GAAD,mBAAC,eAAYA,GAAb,IAAgB3D,SAAU2D,EAAE3D,SAAW,QAE5CwD,EAAG,GAAK3D,EAAO,GAAG,GACvBK,EAAOG,EAASH,KAClBI,GAAY,SAACqD,GAAD,mBAAC,eAAYA,GAAb,IAAgB1D,UAAW0D,EAAE1D,UAAY,OAErDK,GAAY,SAACqD,GAAD,mBAAC,eAAYA,GAAb,IAAgB1D,UAAW0D,EAAE1D,UAAY,QAE9CuD,EAAG,GAAK3D,EAAO,GAAG,GACvBK,EAAOG,EAASH,KAClBI,GAAY,SAACqD,GAAD,mBAAC,eAAYA,GAAb,IAAgB3D,SAAU2D,EAAE3D,SAAW,OAEnDM,GAAY,SAACqD,GAAD,mBAAC,eAAYA,GAAb,IAAgB3D,SAAU2D,EAAE3D,SAAW,QAGrDM,EAAY+C,IAwGVO,OA/IU,kBAAMpD,GAAe,IAgJ/BqD,QArGgB,SAACC,GACrB,GAAIvD,EAAa,CACf,IAAMvB,EAAMmD,EAAO4B,QAAQC,SACrBtB,EAAU1D,EAAIiF,UACdC,EAAexB,EAAU,EAAI,WAAa,SACxCyB,EAAqBL,EAArBK,SAAUC,EAAWN,EAAXM,OAEZC,EAAiBF,EAASrB,MAC9B,SAACwB,GAAD,MAAsB,gBAAfA,EAAEC,MAAMjI,IAAuC,iBAAfgI,EAAEC,MAAMjI,MAEjD,GAAI+H,EAAgB,CAAC,IAAD,cACYD,EADZ,GACXnE,EADW,KACAD,EADA,KAElBU,EAAe,CAAET,YAAWD,aAE5BwC,EAAkB6B,EAAgB3B,GAE9BH,EAAmBwB,SACrB/E,EAAIwF,gBACF,CAAEhI,OAAQ+F,EAAmBwB,QAASzH,GAAIgG,EAAeyB,SACzD,CAAEU,OAAO,IAIbnC,EAAeyB,QAAUM,EAAe/H,GACxCiG,EAAmBwB,QAAUM,EAAe7H,OAE5CwC,EAAIwF,gBACF,CAAEhI,OAAQ+F,EAAmBwB,QAASzH,GAAIgG,EAAeyB,SACzD,CAAEU,OAAO,SAGX/D,EAAe,IACf1B,EAAIwF,gBACF,CACEhI,OAAQ+F,EAAmBwB,SAAWG,EACtC5H,GAAIgG,EAAeyB,SAErB,CAAEU,OAAO,IAGXnC,EAAeyB,QAAU,KACzBxB,EAAmBwB,QAAU,OA6D7BW,QAAS,IAE+B,IAAvCC,OAAOC,QAAQnE,GAAaoE,QACU,IAArCF,OAAOC,QAAQ3C,GAAW4C,QACxB,kBAAC,IAAD,CACE7E,SAAUS,EAAYT,SACtBC,UAAWQ,EAAYR,UACvB6E,aAAa,EACbC,OAAO,SACPC,WAAY,IAEZ,yBAAK9H,UAAU,mBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACEI,KAAM2E,EACNlD,SAAU,CACR,mBACA,WACA,wBACA,SAEFrB,MAAO,IACPD,OAAQ,IACRE,IAAK,GACLC,OAAQ,GACRC,KAAM,GACNC,MAAO,QAMnB,kBAAC,IAAD,CACExB,GAAG,WACHC,KAAK,UACLe,KAAM2H,EACNjC,IAAKX,EACL6C,YAAY,GAEZ,kBAAC,IAAD,iBAAW7I,EAAX,CAA+B8I,SAAU,oBACzC,kBAAC,IAAD,iBAAWtI,EAAX,CAAgCsI,SAAU,qBAE5C,kBAAC,IAAD,CACE7I,GAAG,SACHC,KAAK,UACLe,KAAM8H,EACNpC,IAAKX,EACL6C,YAAY,GAEZ,kBAAC,IAAD,iBAAWpI,EAAX,CAA6BqI,SAAU,oBACvC,kBAAC,IAAD,iBAAWnI,EAAX,CAA8BmI,SAAU,qBAe1C,yBAAKjI,UAAU,kBACb,kBAAC,IAAD,CAAmBmI,aAAa,Q,MCxP3BC,MAdf,WACE,OACE,yBAAKpI,UAAU,OACb,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,aACb,kBAAC,EAAD,OAGF,yBAAKA,UAAU,kBCFHqI,QACW,cAA7BnI,OAAOoI,SAASC,UAEe,UAA7BrI,OAAOoI,SAASC,UAEhBrI,OAAOoI,SAASC,SAASC,MACvB,2DCZNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,SDyHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAA5G,GACL6G,QAAQ7G,MAAMA,EAAM8G,c","file":"static/js/main.d6659811.chunk.js","sourcesContent":["export const clusterLayer = {\n  id: \"clusters\",\n  type: \"circle\",\n  source: \"covid-19 Patient Location\",\n  filter: [\"has\", \"point_count\"],\n  paint: {\n    \"circle-color\": [\n      \"step\",\n      [\"get\", \"point_count\"],\n      \"#51bbd6\",\n      100,\n      \"#f1f075\",\n      750,\n      \"#f28cb1\",\n    ],\n    \"circle-radius\": [\"step\", [\"get\", \"point_count\"], 20, 100, 30, 750, 40],\n  },\n};\n\nexport const clusterCountLayer = {\n  id: \"cluster-count\",\n  type: \"symbol\",\n  source: \"covid-19 Patient Location\",\n  filter: [\"has\", \"point_count\"],\n  layout: {\n    \"text-field\": \"{point_count_abbreviated}\",\n    \"text-font\": [\"DIN Offc Pro Medium\", \"Arial Unicode MS Bold\"],\n    \"text-size\": 12,\n  },\n};\n\nexport const unclusteredPointLayer = {\n  id: \"unclustered-point\",\n  type: \"circle\",\n  source: \"covid-19 Patient Location\",\n  filter: [\"!\", [\"has\", \"point_count\"]],\n  paint: {\n    \"circle-color\": \"#11b4da\",\n    \"circle-radius\": 4,\n    \"circle-stroke-width\": 1,\n    \"circle-stroke-color\": \"#fff\",\n  },\n};\n\nexport const countiesBoundLayer = {\n  id: \"county-bound\",\n  type: \"fill\",\n  source: \"counties\",\n  minzoom: 5,\n  layout: {},\n  filter: [\"==\", \"$type\", \"Polygon\"],\n  paint: {\n    \"fill-color\": \"#FFFFFF\",\n    \"fill-opacity\": [\n      \"case\",\n      [\"boolean\", [\"feature-state\", \"hover\"], false],\n      0.6,\n      0.2,\n      // 0,\n      // 0,\n    ],\n  },\n};\n\nexport const countiesBorderLayer = {\n  id: \"county-border\",\n  type: \"line\",\n  source: \"counties\",\n  minzoom: 5,\n  layout: {},\n  paint: {\n    \"line-color\": \"#FFFFFF\",\n    // \"line-color\": [\n    //   \"case\",\n    //   [\"boolean\", [\"feature-state\", \"hover\"], false],\n    //   \"#FF093C\",\n    //   [\n    //     \"interpolate\",\n    //     [\"linear\"],\n    //     [\"get\", \"CENSUSAREA\"],\n    //     0,\n    //     \"#FFF4EF\",\n    //     100,\n    //     \"#FEDACA\",\n    //     1000,\n    //     \"#FCB49A\",\n    //     5000,\n    //     \"#FC896C\",\n    //     10000,\n    //     \"#F75E44\",\n    //     50000,\n    //     \"#E13129\",\n    //     100000,\n    //     \"#BB171C\",\n    //     500000,\n    //     \"#8B4225\",\n    //     1000000,\n    //     \"#723122\",\n    //   ],\n    // ],\n    \"line-opacity\": [\n      \"case\",\n      [\"boolean\", [\"feature-state\", \"hover\"], false],\n      1,\n      0.5,\n    ],\n    \"line-width\": 1.4,\n  },\n};\n\nexport const statesBoundLayer = {\n  id: \"state-bound\",\n  source: \"states\",\n  maxzoom: 5,\n  type: \"fill\",\n  layout: {},\n  // filter: [\"==\", \"$type\", \"Polygon\"],\n  paint: {\n    \"fill-color\": \"#30cbef\",\n    // \"fill-opacity\": 0.3,\n    \"fill-opacity\": [\n      \"case\",\n      [\"boolean\", [\"feature-state\", \"hover\"], false],\n      0.6,\n      0.2,\n    ]\n  },\n};\n\nexport const statesBorderLayer = {\n  id: \"state-borders\",\n  type: \"line\",\n  source: \"states\",\n  layout: {},\n  paint: {\n    \"line-color\": \"#0fa2c4\",\n    \"line-opacity\": [\n      \"case\",\n      [\"boolean\", [\"feature-state\", \"hover\"], false],\n      1,\n      0.5,\n    ],\n    \"line-width\": [\n      \"interpolate\", [\"linear\"], [\"zoom\"],\n        5, 2,\n        6, 6\n    ]\n  },\n};\n","import React from \"react\";\n\nimport './spiner.scss'\n\nconst Spiner = () => {\n  return (\n    <div className=\"cssload-container\">\n      <div className=\"cssload-circle-1\">\n        <div className=\"cssload-circle-2\">\n          <div className=\"cssload-circle-3\">\n            <div className=\"cssload-circle-4\">\n              <div className=\"cssload-circle-5\">\n                <div className=\"cssload-circle-6\">\n                  <div className=\"cssload-circle-7\">\n                    <div className=\"cssload-circle-8\"></div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Spiner;\n","import React from \"react\";\n\nconst d3 = window.d3;\n\nconst Circle = ({\n  data,\n  sqrtScale,\n  colorScale,\n  width,\n  height,\n  top,\n  bottom,\n  left,\n  right,\n}) => {\n  return (\n    <circle\n      r={sqrtScale(data.value)}\n      cx={sqrtScale(data.value)}\n      cy={height / 2}\n      fill={colorScale(data.name)}\n    />\n  );\n};\n\nconst ConcentricChart = (props) => {\n  const totalTest = props.data.totalTestResults;\n  const sqrtScale = d3\n    .scaleSqrt()\n    .domain([0, totalTest])\n    .range([0, (props.height - props.top - props.bottom) / 2]);\n  const colorScale = d3\n    .scaleOrdinal()\n    .domain(props.data)\n    .range([\n      \"rgb(129, 197, 64)\",\n      \"rgb(245, 181, 46)\",\n      \"rgb(237, 91, 53)\",\n      \"rgb(0,0,0)\",\n    ]);\n\n  //   console.log(\"data: \", props.data);\n\n  return (\n    <>\n      <h1 className=\"chart-header\">{`State: ${props.data.stateName}`}</h1>\n      <svg width={props.width} height={props.height}>\n        <g\n          transform={`translate(${\n            props.width / 2 - sqrtScale(totalTest)\n          }, 0)`}\n        >\n          {props.dataKeys.map((_k, _n) => (\n            <Circle\n              key={_n}\n              data={{\n                name: _k,\n                value: props.data[_k],\n              }}\n              width={props.width}\n              height={props.height}\n              top={props.top}\n              right={props.right}\n              bottom={props.bottom}\n              left={props.left}\n              sqrtScale={sqrtScale}\n              colorScale={colorScale}\n            />\n          ))}\n        </g>\n      </svg>\n    </>\n  );\n};\n\nexport default ConcentricChart;\n","export const usaStatesAbbr = [\n  { label: \"Alabama\", value: \"AL\" },\n  { label: \"Alaska\", value: \"AK\" },\n  { label: \"American Samoa\", value: \"AS\" },\n  { label: \"Arizona\", value: \"AZ\" },\n  { label: \"Arkansas\", value: \"AR\" },\n  { label: \"California\", value: \"CA\" },\n  { label: \"Colorado\", value: \"CO\" },\n  { label: \"Connecticut\", value: \"CT\" },\n  { label: \"Delaware\", value: \"DE\" },\n  { label: \"District of Columbia\", value: \"DC\" },\n  { label: \"States of Micronesia\", value: \"FM\" },\n  { label: \"Florida\", value: \"FL\" },\n  { label: \"Georgia\", value: \"GA\" },\n  { label: \"Guam\", value: \"GU\" },\n  { label: \"Hawaii\", value: \"HI\" },\n  { label: \"Idaho\", value: \"ID\" },\n  { label: \"Illinois\", value: \"IL\" },\n  { label: \"Indiana\", value: \"IN\" },\n  { label: \"Iowa\", value: \"IA\" },\n  { label: \"Kansas\", value: \"KS\" },\n  { label: \"Kentucky\", value: \"KY\" },\n  { label: \"Louisiana\", value: \"LA\" },\n  { label: \"Maine\", value: \"ME\" },\n  { label: \"Marshall Islands\", value: \"MH\" },\n  { label: \"Maryland\", value: \"MD\" },\n  { label: \"Massachusetts\", value: \"MA\" },\n  { label: \"Michigan\", value: \"MI\" },\n  { label: \"Minnesota\", value: \"MN\" },\n  { label: \"Mississippi\", value: \"MS\" },\n  { label: \"Missouri\", value: \"MO\" },\n  { label: \"Montana\", value: \"MT\" },\n  { label: \"Nebraska\", value: \"NE\" },\n  { label: \"Nevada\", value: \"NV\" },\n  { label: \"New Hampshire\", value: \"NH\" },\n  { label: \"New Jersey\", value: \"NJ\" },\n  { label: \"New Mexico\", value: \"NM\" },\n  { label: \"New York\", value: \"NY\" },\n  { label: \"North Carolina\", value: \"NC\" },\n  { label: \"North Dakota\", value: \"ND\" },\n  { label: \"Northern Mariana Islands\", value: \"MP\" },\n  { label: \"Ohio\", value: \"OH\" },\n  { label: \"Oklahoma\", value: \"OK\" },\n  { label: \"Oregon\", value: \"OR\" },\n  { label: \"Palau\", value: \"PW\" },\n  { label: \"Pennsylvania\", value: \"PA\" },\n  { label: \"Puerto Rico\", value: \"PR\" },\n  { label: \"Rhode Island\", value: \"RI\" },\n  { label: \"South Carolina\", value: \"SC\" },\n  { label: \"South Dakota\", value: \"SD\" },\n  { label: \"Tennessee\", value: \"TN\" },\n  { label: \"Texas\", value: \"TX\" },\n  { label: \"Utah\", value: \"UT\" },\n  { label: \"Vermont\", value: \"VT\" },\n  { label: \"Virgin Islands\", value: \"VI\" },\n  { label: \"Virginia\", value: \"VA\" },\n  { label: \"Washington\", value: \"WA\" },\n  { label: \"West Virginia\", value: \"WV\" },\n  { label: \"Wisconsin\", value: \"WI\" },\n  { label: \"Wyoming\", value: \"WY\" },\n];\n\nexport const COVIDTRACKER_API_LINK =\n  \"https://covidtracking.com/api/v1/states/current.json\";\n","import { useReducer, useState, useEffect } from \"react\";\n\nconst fetchReducer = (state, action) => {\n  switch (action.type) {\n    case \"FETCH_INIT\":\n      return {\n        ...state,\n        isLoading: true,\n        error: null,\n      };\n    case \"FETCH_SUCCESS\":\n      return {\n        ...state,\n        isLoading: false,\n        error: null,\n        data: action.payload,\n      };\n    case \"FETCH_ERROR\":\n      return {\n        ...state,\n        isLoading: false,\n        error: action.error,\n      };\n    default:\n      throw new Error(\"Not suppored action\");\n  }\n};\n\nexport default function useFetch(initialUrl, initialOptions = {}) {\n  const [url, setUrl] = useState(initialUrl);\n  const [options, setOptions] = useState(initialOptions)\n\n  const [state, dispatch] = useReducer(fetchReducer, {\n    data: null,\n    isLoading: false,\n    error: null,\n  });\n\n  useEffect(() => {\n    const fetchDataAPI = async () => {\n      dispatch({ type: \"FETCH_INIT\" });\n\n      try {\n        const response = await fetch(url, options);\n        if (response.status < 200 || response.status >= 300) {\n          throw new Error(\"Error fetching data\");\n        }\n        const payload = await response.json();\n\n        dispatch({ type: \"FETCH_SUCCESS\", payload });\n      } catch (error) {\n        dispatch({ type: \"FETCH_ERROR\", error });\n      }\n    };\n\n    fetchDataAPI();\n  }, [url, options]);\n\n  return [state, setUrl, setOptions];\n}\n","import React, { useRef, useState, useEffect } from \"react\";\nimport ReactMapGL, {\n  Source,\n  Layer,\n  Popup,\n  NavigationControl,\n  WebMercatorViewport,\n} from \"react-map-gl\";\nimport {\n  // clusterLayer,\n  // clusterCountLayer,\n  // unclusteredPointLayer,\n  statesBoundLayer,\n  statesBorderLayer,\n  countiesBoundLayer,\n  countiesBorderLayer,\n} from \"./Layers\";\nimport Spiner from \"./spiner/Spiner\";\nimport ConcentricChart from \"./charts/ConcentricChart\";\n\nimport { /* GeoData, */ usGeoJsonCounties, usGeoJsonStates } from \"../data\";\nimport { usaStatesAbbr, COVIDTRACKER_API_LINK } from \"../helpers\";\nimport { useFetch } from \"../hooks\";\n\nconst TOKEN = process.env.REACT_APP_MAPBOX_ACCESS;\n\nconst bounds = [\n  [-179.999, 16.01619],\n  [-64.46466, 71.757764],\n];\n\nconst Map = () => {\n  const [viewport, setViewport] = useState({\n    latitude: 40.54097864298709,\n    longitude: -99.81367290280828,\n    zoom: 3,\n    bearing: 0,\n    pitch: 0,\n  });\n  const [isMapLoaded, setIsMapLoaded] = useState(false);\n  const [popupCoords, setPopupCoords] = useState({});\n  const [{ data: trackers, isLoading: isTrackersLoading, error }] = useFetch(\n    COVIDTRACKER_API_LINK\n  );\n  const [isLoading, setIsLoading] = useState(false);\n  const [chartData, setChartData] = useState({\n    death: 24,\n    hospitalizedCurrently: 75,\n    positive: 2721,\n    totalTestResults: 19022,\n  });\n\n  const mapRef = useRef();\n  const _sourceRef = useRef();\n  const hoveredStateId = useRef(null);\n  const hoveredStateSource = useRef(null);\n\n  const _onLoad = () => setIsMapLoaded(true);\n\n  const _onViewportChange = (_viewport) => {\n    const { width, height, zoom } = _viewport;\n    const vp = new WebMercatorViewport(_viewport);\n    const ws = vp.unproject([0, height]);\n    const en = vp.unproject([width, 0]);\n\n    if (en[0] > bounds[1][0]) {\n      if (zoom < viewport.zoom) {\n        // const zoomDiff = viewport.zoom - zoom;\n        // setViewport((v) => ({ ...v, longitude: v.longitude - zoomDiff }));\n        setViewport((v) => ({ ...v, longitude: v.longitude - 1 }));\n      } else {\n        setViewport((v) => ({\n          ...v,\n          longitude: v.longitude - 0.1,\n          // longitude: v.longitude - ((en[0] - bounds[1][0]) / 10),\n        }));\n      }\n    } else if (en[1] > bounds[1][1]) {\n      if (zoom < viewport.zoom) {\n        setViewport((v) => ({ ...v, latitude: v.latitude - 1 }));\n      } else {\n        setViewport((v) => ({ ...v, latitude: v.latitude - 0.1 }));\n      }\n    } else if (ws[0] < bounds[0][0]) {\n      if (zoom < viewport.zoom) {\n        setViewport((v) => ({ ...v, longitude: v.longitude + 1 }));\n      } else {\n        setViewport((v) => ({ ...v, longitude: v.longitude + 0.1 }));\n      }\n    } else if (ws[1] < bounds[0][1]) {\n      if (zoom < viewport.zoom) {\n        setViewport((v) => ({ ...v, latitude: v.latitude + 1 }));\n      } else {\n        setViewport((v) => ({ ...v, latitude: v.latitude + 0.1 }));\n      }\n    } else {\n      setViewport(_viewport);\n    }\n  };\n\n  const _onMouseHover = (event) => {\n    if (isMapLoaded) {\n      const map = mapRef.current.getMap();\n      const mapZoom = map.getZoom();\n      const hoveredLayer = mapZoom > 5 ? \"counties\" : \"states\";\n      const { features, lngLat } = event;\n\n      const hoveredFeature = features.find(\n        (f) => f.layer.id === \"state-bound\" || f.layer.id === \"county-bound\"\n      );\n      if (hoveredFeature) {\n        const [longitude, latitude] = lngLat;\n        setPopupCoords({ longitude, latitude });\n\n        getInfoAboutState(hoveredFeature, mapZoom);\n\n        if (hoveredStateSource.current) {\n          map.setFeatureState(\n            { source: hoveredStateSource.current, id: hoveredStateId.current },\n            { hover: false }\n          );\n        }\n\n        hoveredStateId.current = hoveredFeature.id;\n        hoveredStateSource.current = hoveredFeature.source;\n\n        map.setFeatureState(\n          { source: hoveredStateSource.current, id: hoveredStateId.current },\n          { hover: true }\n        );\n      } else {\n        setPopupCoords({});\n        map.setFeatureState(\n          {\n            source: hoveredStateSource.current || hoveredLayer,\n            id: hoveredStateId.current,\n          },\n          { hover: false }\n        );\n\n        hoveredStateId.current = null;\n        hoveredStateSource.current = null;\n      }\n    }\n  };\n\n  const getInfoAboutState = (feature, mapZoom) => {\n    const stateName = feature.properties.NAME;\n    const stateAbbr = usaStatesAbbr.find(\n      (stateAbbr) => stateAbbr.label === stateName\n    );\n\n    if (mapZoom < 5) {\n      const {\n        positive,\n        hospitalizedCurrently,\n        death,\n        totalTestResults,\n      } = trackers.find((tracker) => tracker.state === stateAbbr.value);\n\n      if (!error) {\n        setChartData({\n          positive,\n          hospitalizedCurrently,\n          death,\n          totalTestResults,\n          stateName,\n        });\n      }\n    } else {\n      setChartData({});\n    }\n  };\n\n  useEffect(() => {\n    if (!isMapLoaded || isTrackersLoading) {\n      setIsLoading(true);\n    } else {\n      setIsLoading(false);\n    }\n  }, [isMapLoaded, isTrackersLoading]);\n\n  return (\n    <div className=\"map-container\">\n      {isLoading && (\n        <div className=\"map-spinner\">\n          <Spiner />\n        </div>\n      )}\n      <ReactMapGL\n        {...viewport}\n        ref={mapRef}\n        width=\"100vw\"\n        height=\"100vh\"\n        mapboxApiAccessToken={TOKEN}\n        mapStyle=\"mapbox://styles/alexnorvag/ck9efq0oz2d0x1ioftrtazzyz\"\n        // mapStyle=\"mapbox://styles/alexnorvag/ck9efq0oz2d0x1ioftrtazzyz/draft\"\n        // mapStyle=\"mapbox://styles/alexnorvag/ck98f0bv407ho1iodg8raxrm4\"\n        // mapStyle=\"mapbox://styles/alexnorvag/ck98f0bv407ho1iodg8raxrm4/draft\"\n        onViewportChange={_onViewportChange}\n        onLoad={_onLoad}\n        onHover={_onMouseHover}\n        minZoom={4}\n      >\n        {Object.entries(popupCoords).length !== 0 &&\n          Object.entries(chartData).length !== 0 && (\n            <Popup\n              latitude={popupCoords.latitude}\n              longitude={popupCoords.longitude}\n              closeButton={false}\n              anchor=\"bottom\"\n              offsetTop={-20}\n            >\n              <div className=\"popup-container\">\n                <div className=\"popup-chart\">\n                  <ConcentricChart\n                    data={chartData}\n                    dataKeys={[\n                      \"totalTestResults\",\n                      \"positive\",\n                      \"hospitalizedCurrently\",\n                      \"death\",\n                    ]}\n                    width={360}\n                    height={280}\n                    top={10}\n                    bottom={10}\n                    left={10}\n                    right={10}\n                  />\n                </div>\n              </div>\n            </Popup>\n          )}\n        <Source\n          id=\"counties\"\n          type=\"geojson\"\n          data={usGeoJsonCounties}\n          ref={_sourceRef}\n          generateId={true}\n        >\n          <Layer {...countiesBoundLayer} beforeId={\"waterway-label\"} />\n          <Layer {...countiesBorderLayer} beforeId={\"waterway-label\"} />\n        </Source>\n        <Source\n          id=\"states\"\n          type=\"geojson\"\n          data={usGeoJsonStates}\n          ref={_sourceRef}\n          generateId={true}\n        >\n          <Layer {...statesBoundLayer} beforeId={\"waterway-label\"} />\n          <Layer {...statesBorderLayer} beforeId={\"waterway-label\"} />\n        </Source>\n\n        {/* <Source\n          type=\"geojson\"\n          data={GeoData}\n          cluster={true}\n          clusterMaxZoom={14}\n          clusterRadius={50}\n          ref={_sourceRef}\n        >\n          <Layer {...clusterLayer} />\n          <Layer {...clusterCountLayer} />\n          <Layer {...unclusteredPointLayer} />\n        </Source> */}\n        <div className=\"map-navigation\">\n          <NavigationControl showCompass={false} />\n        </div>\n      </ReactMapGL>\n    </div>\n  );\n};\n\nexport default Map;\n","import React from \"react\";\nimport Map from \"./components/Map\";\n// import Charts from \"./components/charts/Charts\";\n\nimport \"./app.scss\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <div className=\"App-container\">\n        <div className=\"covid-map\">\n          <Map />\n        </div>\n\n        <div className=\"map-charts\">{/* <Charts /> */}</div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}