(this["webpackJsonpcovid19-usa"]=this["webpackJsonpcovid19-usa"]||[]).push([[0],{190:function(e,t,a){e.exports=a(394)},195:function(e,t,a){},392:function(e,t,a){},393:function(e,t,a){},394:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(186),r=a.n(i),o=(a(195),a(196),a(205),a(189)),c=a(14),s=a(35),u={id:"county-bound",type:"fill",source:"counties",minzoom:5,layout:{},filter:["==","$type","Polygon"],paint:{"fill-color":"#FFFFFF","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.6,.2]}},d={id:"county-border",type:"line",source:"counties",minzoom:5,layout:{},paint:{"line-color":"#FFFFFF","line-opacity":["case",["boolean",["feature-state","hover"],!1],1,.5],"line-width":1.4}},h={id:"state-bound",source:"states",maxzoom:5,type:"fill",layout:{},paint:{"fill-color":"#30cbef","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.6,.2]}},b={id:"state-borders",type:"line",source:"states",layout:{},paint:{"line-color":"#0fa2c4","line-opacity":["case",["boolean",["feature-state","hover"],!1],1,.5],"line-width":["interpolate",["linear"],["zoom"],5,2,6,6]}},m=(a(392),function(){return l.a.createElement("div",{className:"cssload-container"},l.a.createElement("div",{className:"cssload-circle-1"},l.a.createElement("div",{className:"cssload-circle-2"},l.a.createElement("div",{className:"cssload-circle-3"},l.a.createElement("div",{className:"cssload-circle-4"},l.a.createElement("div",{className:"cssload-circle-5"},l.a.createElement("div",{className:"cssload-circle-6"},l.a.createElement("div",{className:"cssload-circle-7"},l.a.createElement("div",{className:"cssload-circle-8"})))))))))}),f=function(e){var t=e.translateX,a=e.translateY,n=e.textAnchor,i=e.dominantBaseline,r=e.fill,o=e.fontSize,c=e.text;return l.a.createElement("text",{transform:"translate(".concat(t,", ").concat(a,")"),textAnchor:n,dominantBaseline:i,fill:r,fontSize:o},c)},v=function(e,t,a){var n=Math.trunc(e/t);return{getX:function(){var l=e/n-t;return(t+l)*(a%n)+l/2},getY:function(e,t,l,i){var r=l+i,o=e/Math.trunc(e/(t+r))-t;return(t+o)*Math.trunc(a/n)+o/2}}},g=function(e){var t=e.containerWidth,a=e.containerHeight,i=e.elementWidth,r=e.elementHeight,o=e.paddingTop,s=e.paddingBottom,u=e.elementLabel,d=e.elementFontSize,h=e.elementIndex,b=e.colorScale,m=Object(n.useState)(0),g=Object(c.a)(m,2),p=g[0],O=g[1],j=Object(n.useState)(0),E=Object(c.a)(j,2),y=E[0],w=E[1];return Object(n.useEffect)((function(){O(v(t,i,h).getX()),w(v(t,i,h).getY(a,r,o,s))}),[t,a,i,r,h,o,s]),l.a.createElement(l.a.Fragment,null,l.a.createElement("rect",{width:i,height:r,fill:b(u),x:p,y:y}),l.a.createElement(f,{translateX:p+2,translateY:y+d+2,textAnchor:"start",dominantBaseline:"baseline",fill:"#fff",fontSize:d,text:u}))},p=[{label:"Alabama",value:"AL",id:"01"},{label:"Alaska",value:"AK",id:"02"},{label:"American Samoa",value:"AS",id:"60"},{label:"Arizona",value:"AZ",id:"04"},{label:"Arkansas",value:"AR",id:"05"},{label:"California",value:"CA",id:"06"},{label:"Colorado",value:"CO",id:"08"},{label:"Connecticut",value:"CT",id:"09"},{label:"Delaware",value:"DE",id:"10"},{label:"District of Columbia",value:"DC",id:"11"},{label:"States of Micronesia",value:"FM",id:"64"},{label:"Florida",value:"FL",id:"12"},{label:"Georgia",value:"GA",id:"13"},{label:"Guam",value:"GU",id:"66"},{label:"Hawaii",value:"HI",id:"15"},{label:"Idaho",value:"ID",id:"16"},{label:"Illinois",value:"IL",id:"17"},{label:"Indiana",value:"IN",id:"18"},{label:"Iowa",value:"IA",id:"19"},{label:"Kansas",value:"KS",id:"20"},{label:"Kentucky",value:"KY",id:"21"},{label:"Louisiana",value:"LA",id:"22"},{label:"Maine",value:"ME",id:"23"},{label:"Marshall Islands",value:"MH",id:"68"},{label:"Maryland",value:"MD",id:"24"},{label:"Massachusetts",value:"MA",id:"25"},{label:"Michigan",value:"MI",id:"26"},{label:"Minnesota",value:"MN",id:"27"},{label:"Mississippi",value:"MS",id:"28"},{label:"Missouri",value:"MO",id:"29"},{label:"Montana",value:"MT",id:"30"},{label:"Nebraska",value:"NE",id:"31"},{label:"Nevada",value:"NV",id:"32"},{label:"New Hampshire",value:"NH",id:"33"},{label:"New Jersey",value:"NJ",id:"34"},{label:"New Mexico",value:"NM",id:"35"},{label:"New York",value:"NY",id:"36"},{label:"North Carolina",value:"NC",id:"37"},{label:"North Dakota",value:"ND",id:"38"},{label:"Northern Mariana Islands",value:"MP",id:"69"},{label:"Ohio",value:"OH",id:"39"},{label:"Oklahoma",value:"OK",id:"40"},{label:"Oregon",value:"OR",id:"41"},{label:"Palau",value:"PW",id:"70"},{label:"Pennsylvania",value:"PA",id:"42"},{label:"Puerto Rico",value:"PR",id:"72"},{label:"Rhode Island",value:"RI",id:"44"},{label:"South Carolina",value:"SC",id:"45"},{label:"South Dakota",value:"SD",id:"46"},{label:"Tennessee",value:"TN",id:"47"},{label:"Texas",value:"TX",id:"48"},{label:"Utah",value:"UT",id:"49"},{label:"Vermont",value:"VT",id:"50"},{label:"Virgin Islands",value:"VI",id:"78"},{label:"Virginia",value:"VA",id:"51"},{label:"Washington",value:"WA",id:"53"},{label:"West Virginia",value:"WV",id:"54"},{label:"Wisconsin",value:"WI",id:"55"},{label:"Wyoming",value:"WY",id:"56"}],O=4,j=22,E=5,y=[[-179.99,16.01619],[-64.46466,71.757764]],w=["rgba(129, 197, 64, 1)","rgba(245, 181, 46, 1)","rgba(237, 91, 53, 1)","rgba(0,0,0, 1)"],S=["rgb(97, 46, 141)","rgb(245, 181, 46)"],N=window.d3,x=function(e){var t=e.data,a=e.sqrtScale,n=e.colorScale,i=e.width,r=e.top,o=e.left;return l.a.createElement("circle",{r:a(t.value),cx:i/2-o,cy:r,fill:n(t.name)})},I=function(e){var t=e.legendWidth,a=e.legendHeight,n=e.legendTop,i=e.legendRight,r=e.legendBottom,o=e.legendLeft,c=e.useLegend,s=e.legendOnRight,u=void 0===s||s,d=e.data.totalTestResults,h=e.data.hospitalizedCurrently,b=u?e.height:e.height-a,m=N.scaleSqrt().domain([0,e.maxTotalTests.totalTestResults+e.maxTotalTests.hospitalizedCurrently]).range([0,(b-e.top-e.bottom)/2]),f=N.scaleOrdinal().domain(e.data).range(w),v=u?170:180;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{className:"chart-header"},"State: ".concat(e.data.stateName)),l.a.createElement("svg",{width:e.width,height:e.height},l.a.createElement("g",{transform:"translate(".concat(0,", ",0,")")},e.dataKeys.map((function(n,i){return l.a.createElement(x,{key:i,data:{name:Object.keys(n)[0],value:e.data[Object.keys(n)[0]]},width:u?e.width-t:e.width,height:u?e.height:e.height-a,top:u?a/2+e.top<m(d)+e.top?m(d)+e.top:a/2+e.top:m(d)+a,right:e.right,bottom:e.bottom,left:n.hospitalizedCurrently?m(d)-m(h)+m(e.data[Object.keys(n)[0]]):m(d)-m(h)-m(e.data[Object.keys(n)[0]]),sqrtScale:m,colorScale:f})}))),c&&l.a.createElement("g",{transform:"translate(".concat(u?"".concat(e.width-v-o-i,", ").concat(a/2+e.top<m(d)+e.top?m(d)-a/2+e.top:e.top):"".concat(0,", ",0),")")},e.dataKeys.map((function(c,s){return l.a.createElement(g,{key:s,containerWidth:t,containerHeight:a,elementWidth:v,elementHeight:26,paddingTop:n,paddingRight:i,paddingBottom:r,paddingLeft:o,elementLabel:"".concat(Object.values(c)[0],": ").concat(e.data[Object.keys(c)[0]]||0),elementFontSize:17,elementIndex:s,colorScale:f})})))))},T=function(e){var t=e.x,a=e.y,n=e.width,i=e.height,r=e.fill;e.showPercentage;return l.a.createElement("rect",{x:t,y:a,width:n,height:i,fill:r})},C=function(e){var t=e.data,a=e.x,n=e.y,i=e.width,r=e.height,o=e.fill,c=e.fontSize,s=e.fontColor,u=e.textAnchor,d=e.dominantBaseline;return l.a.createElement(l.a.Fragment,null,l.a.createElement(T,{x:a,y:n,width:i,height:r,fill:o}),l.a.createElement(f,{translateX:a+2,translateY:n+c,textAnchor:u,dominantBaseline:d,fill:s,fontSize:c,text:"".concat(t.key,": ").concat(t.value)}))},R=window.d3,k=function(e){var t=e.width,a=e.height,n=e.top,i=e.right,r=e.bottom,o=e.left,c=e.data,s=e.showLegend,u=e.legendData,d=e.showPercentage,h=void 0===d||d,b=t-o-i,m=a-n-r,v=m/3,g=m-v,p=R.scaleOrdinal().domain(c.map((function(e,t){return t}))).range(S),O=R.scaleLinear().domain([0,R.max(c)]).range([0,b]),j=R.scaleBand().range([0,g]).domain(c.map((function(e,t){return t}))).padding(.1),E=R.scaleOrdinal().domain(u).range(S),y=R.scaleBand().range([0,b]).domain(u).paddingInner(.1),w=R.format(".2f"),N=function(e){return e<38?38:e};return l.a.createElement("svg",{width:t,height:a},l.a.createElement("g",{transform:"translate(".concat(o,", ").concat(n,")")},c.map((function(e,t){return l.a.createElement(l.a.Fragment,{key:t},l.a.createElement(T,{key:t,x:O(0),y:j(t),width:O(e),height:j.bandwidth(),fill:p(t)}),h&&l.a.createElement(f,{translateX:N(O(e)-2),translateY:j(t)+j.bandwidth()/2,textAnchor:"end",dominantBaseline:"middle",fill:"#fff",fontSize:12,text:"".concat(w(100*e/R.max(c)),"%")}))})),s&&u.map((function(e,t){return l.a.createElement(C,{key:t,data:{key:e,value:c[t]},x:y(e),y:g+r,width:y.bandwidth(),height:v-r,fill:E(e),fontSize:15,fontColor:"#fff",textAnchor:"start",dominantBaseline:"middle"})}))))},A=function(e){var t=e.chartHeaders,a=void 0===t?[{key:"null",value:"null"}]:t,n=e.chartData;return l.a.createElement(l.a.Fragment,null,a.map((function(e,t){return l.a.createElement("h1",{className:"chart-header",key:t},"".concat(e.key,": ").concat(e.value))})),0!==n.length?l.a.createElement(k,{width:360,height:140,data:n,top:10,right:10,bottom:10,left:10,showLegend:!0,legendData:["Max RSEI","County RSEI"]}):l.a.createElement("h1",{className:"chart-header",style:{paddingTop:"10px"}},"RSEI Score: NO DATA"))},M=a(119),F=a.n(M),z=a(188),H=a(53),L=function(e,t){switch(t.type){case"FETCH_INIT":return Object(H.a)(Object(H.a)({},e),{},{isLoading:!0,error:null});case"FETCH_SUCCESS":return Object(H.a)(Object(H.a)({},e),{},{isLoading:!1,error:null,data:t.payload});case"FETCH_ERROR":return Object(H.a)(Object(H.a)({},e),{},{isLoading:!1,error:t.error});default:throw new Error("Not suppored action")}};var D=window.d3,W=function(){var e=Object(n.useState)({latitude:40.54097864298709,longitude:-99.81367290280828,zoom:O,bearing:0,pitch:0}),t=Object(c.a)(e,2),i=t[0],r=t[1],f=Object(n.useState)(!1),v=Object(c.a)(f,2),g=v[0],w=v[1],S=Object(n.useState)({}),N=Object(c.a)(S,2),x=N[0],T=N[1],C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object(n.useState)(e),l=Object(c.a)(a,2),i=l[0],r=l[1],o=Object(n.useState)(t),s=Object(c.a)(o,2),u=s[0],d=s[1],h=Object(n.useReducer)(L,{data:null,isLoading:!1,error:null}),b=Object(c.a)(h,2),m=b[0],f=b[1];return Object(n.useEffect)((function(){(function(){var e=Object(z.a)(F.a.mark((function e(){var t,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f({type:"FETCH_INIT"}),e.prev=1,e.next=4,fetch(i,u);case 4:if(!((t=e.sent).status<200||t.status>=300)){e.next=7;break}throw new Error("Error fetching data");case 7:return e.next=9,t.json();case 9:a=e.sent,f({type:"FETCH_SUCCESS",payload:a}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),f({type:"FETCH_ERROR",error:e.t0});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}})()()}),[i,u]),[m,r,d]}("https://covidtracking.com/api/v1/states/current.json"),R=Object(c.a)(C,1)[0],k=R.data,M=R.isLoading,H=R.error,W=Object(n.useState)(!1),B=Object(c.a)(W,2),P=B[0],Y=B[1],V=Object(n.useState)(0),K=Object(c.a)(V,2),U=K[0],G=K[1],J=Object(n.useState)(0),X=Object(c.a)(J,2),Z=X[0],_=X[1],q=Object(n.useState)({}),$=Object(c.a)(q,2),Q=$[0],ee=$[1],te=Object(n.useState)({}),ae=Object(c.a)(te,2),ne=ae[0],le=ae[1],ie=Object(n.useState)([]),re=Object(c.a)(ie,2),oe=re[0],ce=re[1],se=Object(n.useState)([]),ue=Object(c.a)(se,2),de=ue[0],he=ue[1],be=Object(n.useState)(!1),me=Object(c.a)(be,2),fe=me[0],ve=me[1],ge=Object(n.useState)([]),pe=Object(c.a)(ge,2),Oe=pe[0],je=pe[1],Ee=Object(n.useState)(!1),ye=Object(c.a)(Ee,2),we=ye[0],Se=ye[1],Ne=Object(n.useState)([]),xe=Object(c.a)(Ne,2),Ie=xe[0],Te=xe[1],Ce=Object(n.useState)(!1),Re=Object(c.a)(Ce,2),ke=Re[0],Ae=Re[1],Me=Object(n.useRef)(),Fe=Object(n.useRef)(),ze=Object(n.useRef)(null),He=Object(n.useRef)(null),Le=Object(n.useRef)(!0),De=function(e){var t=e.properties.NAME,a=p.find((function(e){return e.label===t})),n=k.find((function(e){return e.state===a.value})),l=n.positive,i=n.hospitalizedCurrently,r=n.hospitalizedCumulative,o=n.death,c=n.totalTestResults;H||ee({positive:l,hospitalizedCurrently:r||i,death:o,totalTestResults:c,stateName:t})},We=function(e){var t,a=e.properties,n=a.GEO_ID,l=a.STATE,i=a.NAME,r=n.includes("US0")?n.indexOf("US0")+3:n.indexOf("US")+2,o=n.substring(r,n.length),c=p.find((function(e){return e.id===l})).label,s=null===(t=oe[o])||void 0===t?void 0:t[0]["RSEI Score"];le({headers:[{key:"State",value:c},{key:"County",value:i}],data:[s]})};return Object(n.useEffect)((function(){!g||M||we||fe||ke?Y(!0):(G(k.slice().sort((function(e,t){return D.descending(e.totalTestResults,t.totalTestResults)}))[0]),ce(D.nest().key((function(e){return e.FIPS})).object(Ie)),_(D.max(Ie,(function(e){return e["RSEI Score"]}))),Y(!1))}),[g,M,k,Ie,fe,ke,we]),Object(n.useEffect)((function(){ve(!0),Se(!0),Ae(!0),a.e(5).then(a.t.bind(null,395,3)).then((function(e){he(e.default),ve(!1)})),a.e(4).then(a.t.bind(null,396,3)).then((function(e){je(e.default),Se(!1)})),a.e(3).then(a.t.bind(null,397,3)).then((function(e){Te(e.default),Ae(!1)}))}),[]),l.a.createElement("div",{className:"map-container"},P&&l.a.createElement("div",{className:"map-spinner"},l.a.createElement(m,null)),l.a.createElement(s.f,Object.assign({},i,{ref:Me,width:"100vw",height:"100vh",mapboxApiAccessToken:"pk.eyJ1IjoiYWxleG5vcnZhZyIsImEiOiJjam1ia2ZoMmQwbDgxM3BxNHN1bGJrZmtqIn0.ac7-waXEpU58Rf5FGn8JbA",mapStyle:"mapbox://styles/alexnorvag/ck9efq0oz2d0x1ioftrtazzyz",onViewStateChange:function(e){var t=e.viewState,a=t.width,n=t.height,l=new s.e(t),i=l.unproject([0,0]),o=l.unproject([a,n]);if(i[0]<y[0][0]){var c=l.project(y[0]),u=l.unproject([(a-1)/2+c[0],n]);t.longitude=u[0]}if(i[1]>y[1][1]){var d=l.project(y[1]),h=l.unproject([a,(n-1)/2+d[1]]);t.latitude=h[1]}if(o[0]>y[1][0]){var b=l.project(y[1]),m=a-b[0],f=l.unproject([(b[0]-1-m)/2,n]);t.longitude=f[0]}if(o[1]<y[0][1]){var v=l.project(y[0]),g=n-v[1],p=l.unproject([a,(v[1]-1-g)/2]);t.latitude=p[1]}r(t)},onLoad:function(){return w(!0)},onHover:function(e){if(g){var t=Me.current.getMap(),a=t.getZoom(),n=a>E?"counties":"states",l=e.features,i=e.lngLat,r=l.find((function(e){return"state-bound"===e.layer.id||"county-bound"===e.layer.id}));if(r){var o=Object(c.a)(i,2),s=o[0],u=o[1];T({longitude:s,latitude:u}),a<E?(le({}),De(r)):(ee({}),We(r)),He.current&&t.setFeatureState({source:He.current,id:ze.current},{hover:!1}),ze.current=r.id,He.current=r.source,t.setFeatureState({source:He.current,id:ze.current},{hover:!0})}else T({}),t.setFeatureState({source:He.current||n,id:ze.current},{hover:!1}),ze.current=null,He.current=null}},minZoom:O,maxZoom:j}),0!==Object.entries(x).length&&l.a.createElement(s.c,{latitude:x.latitude,longitude:x.longitude,closeButton:!1,anchor:"bottom-right"},l.a.createElement("div",{className:"popup-container"},l.a.createElement("div",{className:"popup-chart"},i.zoom<E?0!==Object.entries(Q).length&&l.a.createElement(I,{data:Q,dataKeys:[{totalTestResults:"Total"},{positive:"Positive"},{hospitalizedCurrently:"Hospitalized"},{death:"Death"}],maxTotalTests:{totalTestResults:U.totalTestResults,hospitalizedCurrently:U.hospitalizedCumulative||U.hospitalizedCurrently},width:Le.current?550:420,height:Le.current?280:360,top:10,bottom:10,left:10,right:10,legendWidth:Le.current?180:420,legendHeight:Le.current?150:80,legendTop:5,legendRight:10,legendBottom:5,legendLeft:10,useLegend:!0,legendOnRight:Le.current}):0!==Object.entries(ne).length&&l.a.createElement(A,{chartHeaders:ne.headers,chartData:ne.data[0]?[Z].concat(Object(o.a)(ne.data)):[]})))),0!==de.length&&l.a.createElement(s.d,{id:"counties",type:"geojson",data:de,ref:Fe,generateId:!0},l.a.createElement(s.a,Object.assign({},u,{beforeId:"waterway-label"})),l.a.createElement(s.a,Object.assign({},d,{beforeId:"waterway-label"}))),0!==Oe.length&&l.a.createElement(s.d,{id:"states",type:"geojson",data:Oe,ref:Fe,generateId:!0},l.a.createElement(s.a,Object.assign({},h,{beforeId:"waterway-label"})),l.a.createElement(s.a,Object.assign({},b,{beforeId:"waterway-label"}))),l.a.createElement("div",{className:"map-navigation"},l.a.createElement(s.b,{showCompass:!1}))))};a(393);var B=function(){return l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"App-container"},l.a.createElement("div",{className:"covid-map"},l.a.createElement(W,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[190,1,2]]]);
//# sourceMappingURL=main.6dfc44c3.chunk.js.map